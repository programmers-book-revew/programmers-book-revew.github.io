---
layout: post
title: 珠玉のプログラミング
categories: rank_3
tags: [プログラマ]
---


<div class="book"><div class="book_image"><a href="http://www.amazon.co.jp/dp/4894712369"><img src="/images/programming_pearls.jpg"></img></a></div><div class="book_info">Jon Bentley/ピアソンエデュケーション</div><div class="clear"></div></div>

ビューティフルコードに感化されて購入した本の第二段。ようやく読み終わる。本の中に書かれていること自体はどこかで目にしたことのあるものばかり。だけど、実際にその考え方が必要な時に使えるかどうかが最も重要なことだと思う。 

自分で考えてみれば、一度だけあるか(あって良かった)。JavaでGCがパフォーマンスの原因になっていた時リングバッファを実装しメモリ管理を効率的にした。誰も書いてくれないので言い出しっぺの自分が書くはめに。飛行機や電車で書いた思い出が。根本的なところで使われるものだったので徹底的にテストして渡した。マルチスレッドでのテストや、ヒープの中を見ながらの確認など時間をかけてテストして、安心して渡した覚えがある。うれしさついでにちょっと自慢げに書いてしまった。 

この本ではいろいろと、優れた手法を紹介しているのだけど、中でもp.182のスペルチェッカーは著者が書くようにまさにpearl(選り抜き、非常に貴重なもの)。限られたリソースの状況で、これでもかという効率化を施し必要な処理を実現してするアイデア群は見事。 

「封筒裏の計算」の重要性について書かれている。封筒の裏でも出来るほどの計算で大まかな値を知るというもの(cf. p.235のメモ)。おおよその実現性を実際に作業に移る前に確認することや計算結果の妥当性を検算する時などに使うことが出来る。本でも取り上げられているフェルミ問題(cf. p.94のメモ)があるけども、その他にも、ニューヨークにピアノの調教師が何人いるかとか富士山をどうやって移動するかとかGoogleやMicrosoftの入社問題として聞いたことのあるものにもつながる気がする。ファインマンもこの手の計算をするクセをつけていたし、とても重要なことなのだと思う。直感で「出来る」と思える人は、こういう感覚で話している気もする。 

この手の本を読む度にKnuth本の重要性を感じるのだけど、本屋に行って立ち読みしては挫折感たっぷりにそのまま帰って来てしまう。まあ、仕方ない。 

以下、自分用メモ。<!--more-->

> 使用するメモリを小さくすることで実行時間も小さくなる。 (p.8. トレードオフの経験的な反例。ある条件下のソートをデータ構造を適切にする(数値をビットで表現する)ことで記憶領域と計算量の両方を減らすことが出来たコンテキストで) 

> 設計が完璧だと思えるものは、もうこれ以上付け足すものがないときではなく、もうこれ以上取り去るものがないときだ(p.9. beautiful codeにも同様のことが書いてあった) 

> 「封筒裏の計算」は私たちの間では有名な物理学者の名をとって「フェルミ近似」と呼ばれることが多いようです。もとになった話は、マンハッタン計画(原爆実験)での話です。フェルミ(Enrico Fermi)やオッペンハイマー(Robert Oppenheimer)たちが、数千ヤードほど離れた爆風よけの壁の後ろで、最初の核爆発を待っていました。フェルミは紙を小さくちぎって、爆発の閃光が見えると空中に投げ上げました。爆風が過ぎた後に、その詩篇がどれだけ飛ばされたかを測ってすばやく「封筒裏の計算」を行い、爆風の威力を計算しました。この結果はずいぶん後になって計測器から得られたものと同じだったのです。(p.94 Fermi problemsの説明。ちなみにこの時、周りが安全のためサングラスをかけている中、ファインマンが理論上不要なはずだということからサングラスを外し、初めて肉眼で見たというのを本で読んだ記憶がある。みんなカシコイ。あと、フェルミ近似って量子力学の近似モデルのことだと思うのだけど。) 

> 「封筒裏の計算」の練習問題。90%の確率で正解が含まれているかを5分～10分で解く。 

> 1. 西暦2000年1月1日のアメリカ合衆国の人口 
2. ナポレオンの生まれた年 
3. ミシシッピ川の長さをマイル単位で(1マイル約1.6km) 
4. ボーイング747の最大離陸時重量をポンドで(1ポンドは約450g) 
5. 電波が地球から月に達成するのに要する時間を秒単位で 
6. ロンドンの緯度 
7. スペースシャトルが地球を1周するのに要する時間を分単位で 
8. ゴールデン・ゲート・ブリッジの2つのタワー間の距離をフィートで(1フィートは約30cm) 
9. 独立宣言に署名した人の数 
10. 成人の体の骨の数 

> 以下、解答(まずは考えてから答えを見よう) 

> 1. 2億7250万人 
2. 1769年 
3. 3,710マイル 
4. 875,000ポンド 
5. 1.29秒 
6. 51.5度 
7. 91分 
8. 4200フィート 
9. 56人 
10. 206個 
(p.235)
